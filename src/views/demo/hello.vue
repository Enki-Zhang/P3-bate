<template>

    <el-row class="_root_page">
        <el-row class="page-default-h-has-breadcrumb" style="background-color: red">
            <Process ref="processDesign" :conf="mockData.processData"
                     tabName="processDesign"
                     @startNodeChange="onStartChange"
                     class="process"/>
        </el-row>
        <el-button type="primary" @click="showProcessData">获取数据</el-button>
    </el-row>

</template>

<script>

    import Process from '@/components/workflow/Process';

    export default {
        name: "index",
        components: {
            Process,
        },
        data() {
            return {
                mockData: {
                    processData: {},
                },
            }
        },
        created() {
            // console.log(JSON.parse("{\"basicSetting\":{\"flowCode\":\"repair\",\"flowGroup\":0,\"flowIcon\":\"el-icon-lollipop\",\"flowIconBackground\":\"#FF8ACC\",\"flowName\":\"报修工单\",\"flowRemark\":null,\"id\":\"1477061296355643394\"},\"formData\":{\"formRef\":\"elForm\",\"gutter\":15,\"size\":\"medium\",\"formRules\":\"rules\",\"labelPosition\":\"right\",\"formBtns\":true,\"labelWidth\":100,\"disabled\":false,\"formModel\":\"formData\",\"fields\":[{\"formId\":103,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修人员\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645255796782,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修人员\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairUser\"},{\"formId\":106,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修人员显示名\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256716446,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修人员显示名\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairUserName\"},{\"formId\":105,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修状态\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256714995,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修状态\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairState\"},{\"formId\":102,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修材料费\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645079473571,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修材料费\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairMaterialsFee\"},{\"formId\":102,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修服务费\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645255785065,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入单行文本维修服务费\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairServiceFee\"},{\"formId\":104,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修备注\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256713803,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修备注\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairContent\"},{\"formId\":108,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"回访结果\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256899513,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入回访结果\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"returnResult\"},{\"formId\":107,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"回访备注\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256897514,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入回访备注\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"returnRemark\"}],\"span\":23},\"processData\":{\"childNode\":{\"childNode\":{\"childNode\":{\"childNode\":null,\"conditionNodes\":null,\"content\":\"工单负责人\",\"nodeId\":\"rWiszNC\",\"outerNodeId\":null,\"prevId\":\"zLKrxNC\",\"properties\":{\"approverRoles\":[{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"workflowManager\",\"name\":\"工单负责人\",\"parentId\":\"-1\",\"type\":\"role\"}],\"approvers\":[],\"assigneeType\":\"role\",\"expression\":\"\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":true,\"required\":true,\"vModel\":\"returnResult\",\"write\":true},{\"formId\":107,\"label\":\"回访备注\",\"read\":true,\"required\":true,\"vModel\":\"returnRemark\",\"write\":true}],\"optionalMultiUser\":\"orSign\",\"title\":\"结果确认\"},\"type\":\"approver\"},\"conditionNodes\":[{\"childNode\":null,\"conditionNodes\":null,\"content\":\"维修完成\",\"nodeId\":\"cQfsxNC\",\"prevId\":\"zLKrxNC\",\"properties\":{\"condition\":\"${repairState == 'repaired'}\",\"conditionLabel\":\"维修完成\",\"conditions\":[{\"condition\":\"${repairState == 'repaired'}\",\"conditonLabel\":\"维修完成\"}],\"initiator\":null,\"isDefault\":false,\"priority\":0,\"title\":\"现场直接修理\"},\"type\":\"condition\"},{\"childNode\":{\"childNode\":null,\"conditionNodes\":null,\"content\":\"自定义\",\"nodeId\":\"OexyxNC\",\"outerNodeId\":null,\"prevId\":\"REfsxNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[],\"assigneeType\":\"input\",\"expression\":\"${repairAssignee}\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":true},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":true},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":true},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"orSign\",\"title\":\"现场维修\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"下次维修\",\"nodeId\":\"REfsxNC\",\"prevId\":\"zLKrxNC\",\"properties\":{\"condition\":\"${repairState == 'repairing'}\",\"conditionLabel\":\"下次维修\",\"conditions\":[{\"condition\":\"${repairState == 'repairing'}\",\"conditonLabel\":\"下次维修\"}],\"initiator\":null,\"isDefault\":false,\"priority\":1,\"title\":\"需要二次上门\"},\"type\":\"condition\"}],\"content\":\"自定义\",\"nodeId\":\"zLKrxNC\",\"outerNodeId\":null,\"prevId\":\"VKVFeNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[],\"assigneeType\":\"input\",\"expression\":\"${repairAssignee}\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":true},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":true},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":true},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":true},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"orSign\",\"title\":\"现场确认\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"财务人员,肇新物业\",\"nodeId\":\"VKVFeNC\",\"outerNodeId\":null,\"prevId\":\"pDVFeNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"finance\",\"name\":\"财务人员\",\"parentId\":\"dept106\",\"type\":\"user\"},{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"admin\",\"name\":\"肇新物业\",\"parentId\":\"dept100\",\"type\":\"user\"}],\"assigneeType\":\"user\",\"expression\":\"\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":true},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":false,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":false,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":false,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":false,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":false,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"counterSign\",\"title\":\"工单分配\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"所有人\",\"nodeId\":\"pDVFeNC\",\"prevId\":null,\"properties\":{\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":true,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":true,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"initiator\":\"all\",\"title\":\"发起人\"},\"type\":\"start\"}}"));

            this.mockData = JSON.parse("{\"basicSetting\":{\"flowCode\":\"repair\",\"flowGroup\":0,\"flowIcon\":\"el-icon-lollipop\",\"flowIconBackground\":\"#FF8ACC\",\"flowName\":\"报修工单\",\"flowRemark\":null,\"id\":\"1477061296355643394\"},\"formData\":{\"formRef\":\"elForm\",\"gutter\":15,\"size\":\"medium\",\"formRules\":\"rules\",\"labelPosition\":\"right\",\"formBtns\":true,\"labelWidth\":100,\"disabled\":false,\"formModel\":\"formData\",\"fields\":[{\"formId\":103,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修人员\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645255796782,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修人员\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairUser\"},{\"formId\":106,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修人员显示名\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256716446,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修人员显示名\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairUserName\"},{\"formId\":105,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修状态\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256714995,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修状态\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairState\"},{\"formId\":102,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修材料费\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645079473571,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修材料费\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairMaterialsFee\"},{\"formId\":102,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修服务费\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645255785065,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入单行文本维修服务费\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairServiceFee\"},{\"formId\":104,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"维修备注\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256713803,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入维修备注\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"repairContent\"},{\"formId\":108,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"回访结果\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256899513,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入回访结果\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"returnResult\"},{\"formId\":107,\"clearable\":true,\"maxlength\":null,\"document\":\"https://element.eleme.cn/#/zh-CN/component/input\",\"prepend\":\"\",\"labelWidth\":null,\"label\":\"回访备注\",\"prefix-icon\":\"\",\"required\":true,\"renderKey\":1645256897514,\"layout\":\"colFormItem\",\"tagIcon\":\"input\",\"readonly\":false,\"changeTag\":true,\"style\":{\"width\":\"100%\"},\"disabled\":false,\"tag\":\"el-input\",\"placeholder\":\"请输入回访备注\",\"show-word-limit\":false,\"suffix-icon\":\"\",\"regList\":[],\"append\":\"\",\"span\":23,\"vModel\":\"returnRemark\"}],\"span\":23},\"processData\":{\"childNode\":{\"childNode\":{\"childNode\":{\"childNode\":null,\"conditionNodes\":null,\"content\":\"工单负责人\",\"nodeId\":\"rWiszNC\",\"outerNodeId\":null,\"prevId\":\"zLKrxNC\",\"properties\":{\"approverRoles\":[{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"workflowManager\",\"name\":\"工单负责人\",\"parentId\":\"-1\",\"type\":\"role\"}],\"approvers\":[],\"assigneeType\":\"role\",\"expression\":\"\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":true,\"required\":true,\"vModel\":\"returnResult\",\"write\":true},{\"formId\":107,\"label\":\"回访备注\",\"read\":true,\"required\":true,\"vModel\":\"returnRemark\",\"write\":true}],\"optionalMultiUser\":\"orSign\",\"title\":\"结果确认\"},\"type\":\"approver\"},\"conditionNodes\":[{\"childNode\":null,\"conditionNodes\":null,\"content\":\"维修完成\",\"nodeId\":\"cQfsxNC\",\"prevId\":\"zLKrxNC\",\"properties\":{\"condition\":\"${repairState == 'repaired'}\",\"conditionLabel\":\"维修完成\",\"conditions\":[{\"condition\":\"${repairState == 'repaired'}\",\"conditonLabel\":\"维修完成\"}],\"initiator\":null,\"isDefault\":false,\"priority\":0,\"title\":\"现场直接修理\"},\"type\":\"condition\"},{\"childNode\":{\"childNode\":null,\"conditionNodes\":null,\"content\":\"自定义\",\"nodeId\":\"OexyxNC\",\"outerNodeId\":null,\"prevId\":\"REfsxNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[],\"assigneeType\":\"input\",\"expression\":\"${repairAssignee}\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":true},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":true},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":true},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"orSign\",\"title\":\"现场维修\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"下次维修\",\"nodeId\":\"REfsxNC\",\"prevId\":\"zLKrxNC\",\"properties\":{\"condition\":\"${repairState == 'repairing'}\",\"conditionLabel\":\"下次维修\",\"conditions\":[{\"condition\":\"${repairState == 'repairing'}\",\"conditonLabel\":\"下次维修\"}],\"initiator\":null,\"isDefault\":false,\"priority\":1,\"title\":\"需要二次上门\"},\"type\":\"condition\"}],\"content\":\"自定义\",\"nodeId\":\"zLKrxNC\",\"outerNodeId\":null,\"prevId\":\"VKVFeNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[],\"assigneeType\":\"input\",\"expression\":\"${repairAssignee}\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":true},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":true},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":true},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":true},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"orSign\",\"title\":\"现场确认\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"财务人员,肇新物业\",\"nodeId\":\"VKVFeNC\",\"outerNodeId\":null,\"prevId\":\"pDVFeNC\",\"properties\":{\"approverRoles\":[],\"approvers\":[{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"finance\",\"name\":\"财务人员\",\"parentId\":\"dept106\",\"type\":\"user\"},{\"children\":null,\"hasChildren\":null,\"icon\":\"icon-ym icon-ym-tree-user2\",\"id\":\"admin\",\"name\":\"肇新物业\",\"parentId\":\"dept100\",\"type\":\"user\"}],\"assigneeType\":\"user\",\"expression\":\"\",\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":true},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":false,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":false,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":false,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":false,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":false,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":false,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":false,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"optionalMultiUser\":\"counterSign\",\"title\":\"工单分配\"},\"type\":\"approver\"},\"conditionNodes\":null,\"content\":\"所有人\",\"nodeId\":\"pDVFeNC\",\"prevId\":null,\"properties\":{\"formOperates\":[{\"formId\":103,\"label\":\"维修人员\",\"read\":true,\"required\":true,\"vModel\":\"repairUser\",\"write\":false},{\"formId\":106,\"label\":\"维修人员显示名\",\"read\":true,\"required\":true,\"vModel\":\"repairUserName\",\"write\":false},{\"formId\":105,\"label\":\"维修状态\",\"read\":true,\"required\":true,\"vModel\":\"repairState\",\"write\":false},{\"formId\":102,\"label\":\"维修材料费\",\"read\":true,\"required\":true,\"vModel\":\"repairMaterialsFee\",\"write\":false},{\"formId\":102,\"label\":\"维修服务费\",\"read\":true,\"required\":true,\"vModel\":\"repairServiceFee\",\"write\":false},{\"formId\":104,\"label\":\"维修备注\",\"read\":true,\"required\":true,\"vModel\":\"repairContent\",\"write\":false},{\"formId\":108,\"label\":\"回访结果\",\"read\":true,\"required\":true,\"vModel\":\"returnResult\",\"write\":false},{\"formId\":107,\"label\":\"回访备注\",\"read\":true,\"required\":true,\"vModel\":\"returnRemark\",\"write\":false}],\"initiator\":\"all\",\"title\":\"发起人\"},\"type\":\"start\"}}")
            console.log(this.mockData);
        },
        methods: {
            onStartChange: function(node) {
                console.log(node);
            },
            showProcessData: function() {
                const getCmpData = name => this.$refs[name].getData();
                // basicSetting  formDesign processDesign 返回的是Promise 因为要做校验
                // const p1 = getCmpData('basicSetting');
                // const p2 = getCmpData('formDesign');
                const p3 = getCmpData('processDesign');
                console.log(p3);
                Promise.all([p3])
                    .then(res => {
                        console.log(res);
                        /*const param = {
                            basicSetting: res[0].formData,
                            processData: res[2].formData,
                            formData: res[1].formData,
                        };
                        this.sendToServer(param);*/
                    })
                    .catch(err => {
                        err.msg && this.$message.warning(err.msg);
                    });
            },
        }
    }

</script>

<style lang="scss" scoped>

    ._root_page {
        padding: 15px;

        .process {
            ::v-deep {
                .btn, .el-button {width: max-content;}
            }
        }


    }

</style>